<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calling Manager</title>
    <link rel="stylesheet" href="styles.css">
    
</head>

<body>
    <div class="overlay" id="popup-overlay" onclick="closePopup()"></div>
    <div class="overlay" id="add-member-overlay" onclick="closeAddMemberModal()"></div>
    <div class="overlay" id="add-calling-overlay" onclick="closeAddCallingModal()"></div>
    
    
    <div id="auth-container">
    <form id="auth-form">
        <h2>Kimberly 1st Calling Manager</h2>
        <label for="pin">Enter PIN:</label>
        <input type="password" id="pin" name="pin" required autocomplete="new-pin">
        <button type="submit">Submit</button>
    </form>
    <div id="auth-message"></div> <!-- To display any messages (success/error) -->
</div>

<div id="app-content" style="display: none;">
    <!-- Main Tabs -->
    <div class="tabs">
        <button class="tablinks" id="tab1-title" onclick="openTab(event, 'Tab1')">Callings Overview</button>
        <button class="tablinks" id="tab2-title" onclick="openTab(event, 'Tab2')">Assign/Release Callings</button>
        <button class="tablinks" id="tab3-title" onclick="openTab(event, 'Tab3')">Member Information</button>
        <button class="tablinks" id="tab4-title" onclick="openTab(event, 'Tab4')">Calling Information</button>
    </div>

    <!-- Context-sensitive sub-bar -->
    <div class="sub-bar">
        <div id="subbar-Tab1" class="subcontent">
            <!-- Options for Tab 1 -->

            <button class="toggle-btn ym-btn" data-org="AaronicPriesthoodQuorums">AP</button>
            <button class="toggle-btn additional-btn" data-org="AdditionalCallings">Additional</button>
            <button class="toggle-btn bishopric-btn" data-org="Bishopric">Bishopric</button>
            <button class="toggle-btn elders-btn" data-org="EldersQuorum">EQ</button>
            <button class="toggle-btn mission-btn" data-org="FullTimeMissionaries">Mission</button>
            <button class="toggle-btn music-btn" data-org="Music">Music</button>
            <button class="toggle-btn primary-btn" data-org="Primary">Primary</button>
            <button class="toggle-btn rs-btn" data-org="ReliefSociety">RS</button>
            <button class="toggle-btn stake-btn" data-org="Stake">Stake</button>
            <button class="toggle-btn ss-btn" data-org="SundaySchool">SS</button> 
            <button class="toggle-btn wos-btn" data-org="TempleandFamilyHistory">WoS</button>
            <button class="toggle-btn yw-btn" data-org="YoungWomen">YW</button>
             
             
            
            <button class="toggle-btn clear-all-btn" onclick="clearAll()">Clear All</button>
            <button class="toggle-btn show-all-btn" onclick="showAll()">Show All</button>
        </div>
        
        <div id="subbar-Tab2" class="subcontent">
            <!-- Options for Tab 2 -->

        </div>
        
        <div id="subbar-Tab3" class="subcontent">
            <!-- Options for Tab 3 -->
        </div>
        
        <div id="subbar-Tab4" class="subcontent">
            <!-- Options for Tab 4 -->
        </div>
    </div>

    <!-- Tab Content -->
    <div id="Tab1" class="tabcontent">
        <div class="large-box" id="large-box">


   
        </div>
    </div>
    
    <div id="Tab2" class="tabcontent">
        <div class="information-box">
        
            <form id="calling-form">
                <div class="two-column-layout">
                    <!-- Left Column: Form Controls -->
                    <div class="left-column">
                        <!-- Member Search & Selection Section -->
                        <div class="section-header">
                            <h3>ðŸ‘¤ Member Selection</h3>
                        </div>
                        <div class="search-section">
                            <div class="search-column">
                                <div class="search-field">
                                    <label for="member-search-tab2">Search Members:</label>
                                    <input type="text" id="member-search-tab2" placeholder="Type name to search..." />
                                </div>
                            </div>
                        </div>
                        <div class="selection-section">
                            <label for="member">Select Member:</label>
                            <select name="member_id" id="member-select" required>
                                <option value="">Select a Member</option>
                            </select>
                        </div>

                        <!-- Calling Search & Selection Section -->
                        <div class="section-header">
                            <h3>â›ª Calling Selection</h3>
                        </div>
                        <div class="search-section">
                            <div class="search-column">
                                <div class="search-field">
                                    <label for="calling-search-tab2">Search Callings:</label>
                                    <input type="text" id="calling-search-tab2" placeholder="Type calling name to search..." />
                                </div>
                            </div>
                        </div>
                        <div class="selection-section">
                            <label for="calling">Select Calling:</label>
                            <select name="calling_id" id="calling-select" required>
                                <option value="">Select a Calling</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Right Column: Tables and Details -->
                    <div class="right-column">
                        <div class="section-header">
                            <h3>ðŸ“‹ Current Information</h3>
                        </div>
                        <div class="details-section">
                            <div id="member-callings-container"></div> <!-- Table for current callings -->
                            <div id="calling-members-container"></div> <!-- Table for members with this calling -->
                        </div>

                        <!-- Date & Action Section -->
                        <div class="section-header">
                            <h3>ðŸ“… Date & Actions</h3>
                        </div>
                        <div class="details-section">
                            <div id="changes-preview" style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 15px; margin-bottom: 20px; display: none;">
                                <h5 style="margin: 0 0 10px 0; color: #495057;">Changes to be made:</h5>
                                <div id="changes-text" style="color: #212529; font-weight: 500;"></div>
                            </div>
                            
                            <label for="date_set_apart">Date of Change:</label>
                            <input type="date" name="date_set_apart" id="date-set-apart" required>
                            
                            <div class="action-buttons">
                                <button type="button" id="make-changes-btn" class="action-btn save-btn" disabled>Make Proposed Changes</button>
                            </div>
                            <div id="form-response"></div>
                        </div>
                    </div>
                </div>
            </form>

        </div>    
    </div>

    <div id="Tab3" class="tabcontent">
        <div class="information-box">
            <div id="member-information-container">
                <!-- Member form content will be dynamically generated here -->
            </div>
        </div>
    </div>

    <div id="Tab4" class="tabcontent">
        <div class="information-box">
            <div id="calling-information-container">
                <!-- Calling form content will be dynamically generated here -->
            </div>
        </div>
    </div>
</div>

<!-- Calling candidates Popup Modal -->
<div id="popup-modal" class="modal">
    <button class="close-btn" onclick="closePopup()">âœ• Close</button>
    <div class="modal-content">
        <h2 id="popup-title"></h2>
        <h4>Search & Filters:</h4>
        
        <label for="candidate-search">Search by Name:</label>
        <input type="text" id="candidate-search" placeholder="Type name to search..." oninput="applyFilters()" />
        
        <!-- Filter container to hold gender and age filters side by side -->
        <div class="filter-container">
            
            <label for="gender-filter">Gender</label>
            <select id="gender-filter" onchange="applyFilters()">
                <option value="">All</option>
                <option value="M">Male</option>
                <option value="F">Female</option>
            </select>
            
            <label for="age-filter">Age</label>
            <select id="age-filter" onchange="applyFilters()">
                <option value="">All</option>
                <option value="under_18">Under 18</option>
                <option value="18_plus">18+</option>
            </select>
        </div>
        
        <label for="callingDropdown">Candidates:</label>
        <select id="callingDropdown">
            <option value="">Select a Candidate</option>
        </select>
        
        <div id="selectionList"></div>
        <label for="candidate-notes">Notes:</label>
        <textarea id="candidate-notes" class="custom-textarea"></textarea>
    </div>
</div>

<!-- Add New Member Modal -->
<div id="add-member-modal" class="modal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeAddMemberModal()">âœ• Close</button>
        <h2>Add New Member</h2>

        <label for="first-name-input">First Name:</label>
        <input type="text" id="first-name-input" />

        <label for="last-name-input">Last Name:</label>
        <input type="text" id="last-name-input" />

        <label for="gender-input">Gender:</label>
        <select id="gender-input">
            <option value="">Select Gender</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>

        <label for="birthdate-input">Birthdate:</label>
        <input type="date" id="birthdate-input" />

        <label for="status-input">Status:</label>
        <select id="status-input">
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
            <option value="moved">Moved Away</option>
            <option value="no_calling">No Current Calling</option>
            <option value="deceased">Deceased</option>
            <option value="unknown">Status Unknown</option>
        </select>

        <label for="status-notes-input">Status Notes (optional):</label>
        <textarea id="status-notes-input" placeholder="Additional notes about this member's status..." rows="3"></textarea>

        <button id="save-member-btn" class="toggle-btn save-btn" onclick="saveNewMember()">Save</button>
    </div>
</div>

<!-- Add New Calling Modal -->
<div id="add-calling-modal" class="modal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeAddCallingModal()">âœ• Close</button>
        <h2>Add New Calling</h2>

        <label for="calling-name-input">Calling Name:</label>
        <input type="text" id="calling-name-input" />

        <label for="calling-organization-input">Organization:</label>
        <select id="calling-organization-input">
                <option value="Aaronic Priesthood Quorums">Aaronic Priesthood Quorums</option>
                <option value="Additional Callings">Additional Callings</option>
                <option value="Bishopric">Bishopric</option>
                <option value="Elders Quorum">Elders Quorum</option>
                <option value="Facilities">Facilities</option>
                <option value="Full-Time Missionaries">Full-Time Missionaries</option>
                <option value="History">History</option>
                <option value="Music">Music</option>
                <option value="Primary">Primary</option>
                <option value="Relief Society">Relief Society</option>
                <option value="Stake">Stake</option>
                <option value="Sunday School">Sunday School</option>
                <option value="Technology">Technology</option>
                <option value="Temple and Family History">Temple and Family History</option>
                <option value="Ward Missionaries">Ward Missionaries</option>
                <option value="Welfare and Self-Reliance">Welfare and Self-Reliance</option>
                <option value="Young Women">Young Women</option>
        </select>

        <label for="calling-grouping-input">Grouping:</label>
        <select id="calling-grouping-input">
            <option value="AP Advisors">AP Advisors</option>
            <option value="AP Class Presidency">AP Class Presidency</option>
            <option value="Additional Callings">Additional Callings</option>
            <option value="Bishopric">Bishopric</option>
            <option value="Elders Quorum">Elders Quorum</option>
            <option value="Full-Time Missionaries">Full-Time Missionaries</option>
            <option value="Music">Music</option>
            <option value="Primary Teachers">Primary Teachers</option>
            <option value="Primary Other">Primary Other</option>
            <option value="Primary Presidency">Primary Presidency</option>
            <option value="RS Other">RS Other</option>
            <option value="RS Presidency">RS Presidency</option>
            <option value="Stake">Stake</option>
            <option value="SS Teachers">SS Teachers</option>
            <option value="SS Other">SS Other</option>
            <option value="SS Presidency">SS Presidency</option>
            <option value="Work of Salvation">Work of Salvation</option>
            <option value="YW Class Presidency">YW Class Presidency</option>
            <option value="YW Presidency">YW Presidency</option>
        </select>


        <label for="calling-priority-input">Priority:</label>
        <input type="text" value="0" id="calling-priority-input" />

        <button id="save-calling-btn" class="toggle-btn save-btn" onclick="saveNewCalling()">Save</button>
    </div>
</div>


    <script src="client-validation.js"></script>
    <script src="script.js"></script>
</body>

</html>
